{% extends "layoutAdmin.html" %}

{% block title %}Add Records â€” PharmaCheck{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/addRecords.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/authorization.css') }}">
{% endblock %}

{% block content %}
<div class="add-records-container">
  <h2 class="page-title">Admin: Add Records</h2>

  <!-- Radio switch to toggle forms -->
  <div class="radio-inputs">
    <label class="radio">
      <input type="radio" name="radio" value="serial" checked>
      <span class="name">Add Serial No</span>
    </label>
    <label class="radio">
      <input type="radio" name="radio" value="batch">
      <span class="name">Add Batch No</span>
    </label>
  </div>

  <div class="forms-grid" style="max-width: 800px;margin-left:auto;margin-right:auto;">
    <!-- Batch Form -->
    <div class="record-card" id="batchFormContainer" style="display: none;">
      <h3 class="form-title">Add Batch Record</h3>
      <form id="batchForm" method="POST" action="{{ url_for('add_batch') }}">
        <div class="form-group">
          <label for="batch_number">Batch Number *</label>
          <input type="text" id="batch_number" name="batch_number" required>
        </div>
        <div class="form-group">
          <label for="manufacturer">Manufacturer</label>
          <input type="text" id="manufacturer" name="manufacturer">
        </div>
        <div class="form-group">
          <label for="manufacture_date">Manufacture Date</label>
          <input type="date" id="manufacture_date" name="manufacture_date">
        </div>
        <div class="form-group">
          <label for="expiry_date">Expiry Date</label>
          <input type="date" id="expiry_date" name="expiry_date">
        </div>
        <div class="form-group">
          <label for="delivery_date">Delivery Date</label>
          <input type="datetime-local" id="delivery_date" name="delivery_date">
        </div>
        <div class="form-group">
          <label for="source_distributor">Source Distributor</label>
          <input type="text" id="source_distributor" name="source_distributor">
        </div>
        <button type="submit" class="submit-btn">Add Batch</button>
      </form>
    </div>

    <!-- Serial Form -->
    <div class="record-card" id="serialFormContainer">
      <h3 class="form-title">Add Serial Record</h3>
      <form id="serialForm" method="POST" action="{{ url_for('add_serial') }}">
        <div class="form-group">
          <label for="serial_no">Serial Number *</label>
          <input type="text" id="serial_no" name="serial_no" required>
        </div>
        <div class="form-group">
          <label for="strength_form">Strength / Form</label>
          <input type="text" id="strength_form" name="strength_form">
        </div>
        <div class="form-group">
          <label for="units_per_pack">Units Per Pack</label>
          <input type="number" id="units_per_pack" name="units_per_pack">
        </div>
        <div class="form-group">
          <label for="packs_per_box">Packs Per Box</label>
          <input type="number" id="packs_per_box" name="packs_per_box">
        </div>
        <div class="form-group">
          <label for="pack_type">Pack Type</label>
          <input type="text" id="pack_type" name="pack_type">
        </div>
        <div class="form-group">
          <label for="batch_number_serial">Batch Number</label>
          <input type="text" id="batch_number_serial" name="batch_number">
        </div>
        <button type="submit" class="submit-btn">Add Serial</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  const radioButtons = document.querySelectorAll('.radio-inputs input[name="radio"]');
  const batchForm = document.getElementById('batchFormContainer');
  const serialForm = document.getElementById('serialFormContainer');

  function toggleForms() {
    radioButtons.forEach(radio => {
      radio.addEventListener('change', () => {
        if (radio.value === 'batch' && radio.checked) {
          batchForm.style.display = 'block';
          serialForm.style.display = 'none';
        } else if (radio.value === 'serial' && radio.checked) {
          serialForm.style.display = 'block';
          batchForm.style.display = 'none';
        }
      });
    });
  }

  // Initialize on page load
  window.addEventListener('DOMContentLoaded', () => {
    toggleForms();
    // Set default form visibility
    const checkedRadio = document.querySelector('.radio-inputs input[name="radio"]:checked');
    if (checkedRadio.value === 'batch') {
      batchForm.style.display = 'block';
      serialForm.style.display = 'none';
    } else {
      serialForm.style.display = 'block';
      batchForm.style.display = 'none';
    }
  });
</script>
{% endblock %}
